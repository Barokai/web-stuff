<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Visualizer</title>
    <link rel="stylesheet" href="src/styles.css">
</head>
<body>
    <div class="container">
        <div class="controls">
            <button id="startButton" class="button">Start Visualizer</button>
            <button id="toggleFullscreen" class="button">Toggle Fullscreen</button>
            <button class="button visualization-toggle active" data-mode="bars">Toggle Bars</button>
            <button class="button visualization-toggle" data-mode="waves">Toggle Waves</button>
            <button class="button visualization-toggle" data-mode="circles">Toggle Circles</button>
            <button class="button visualization-toggle" data-mode="fractal">Toggle Fractal</button>
            <button id="changeMicButton" class="button">Change Microphone</button>
        </div>

        <div id="microphoneSelector" class="mic-selector">
            <select id="microphoneList" class="mic-select">
                <option value="">Select a microphone...</option>
            </select>
        </div>

        <canvas id="visualizer"></canvas>

        <div class="info-panel">
            <div id="microphoneInfo">No microphone selected</div>
            <div id="soundWarning">No sound detected! Check your microphone.</div>
        </div>

        <div class="info-panel disclaimer" style="margin-top: 2rem;">
            <p style="opacity: 0.8;">
                This visualizer was developed with assistance from GitHub Copilot (powered by OpenAI's GPT-4)
                and Claude 3.5 Sonnet. Performance and behavior may vary across different browsers and systems.
            </p>
        </div>

        <details class="readme-section" style="margin-top: 2rem; padding: 1rem; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
            <summary style="cursor: pointer; font-size: 1.2rem; margin-bottom: 1rem;">Tool Documentation</summary>
            <div id="readme-content" class="markdown-body" style="color: var(--on-surface);">
                Loading documentation...
            </div>
        </details>
    </div>
    <script type="module" src="./dist/script.js"></script>
    <script type="module">
        import { loadMarkdown } from '../shared/markdown-loader.js';

        document.addEventListener('DOMContentLoaded', async () => {
            const readmeContent = document.getElementById('readme-content');
            const html = await loadMarkdown('./README.md');
            readmeContent.innerHTML = html;
        });
    </script>
</body>
</html>
